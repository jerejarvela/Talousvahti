<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sijoitustuottolaskuri - Talousvahti</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    background-color: #0f0f0f;
    color: #fff;
  }
  a { text-decoration: none; }

  /* Navbar */
  .navbar {
    display: flex; justify-content: space-between; align-items: center;
    background-color: #000; padding: 15px 30px; border-bottom: 2px solid #222;
    position: sticky; top: 0; z-index: 3000;
  }
  .navbar .brand { font-size: 26px; font-weight: bold; letter-spacing: 1px; color: #fff; }
  .navbar ul { list-style: none; display: flex; gap: 25px; }
  .navbar ul li a {
    color: #fff; font-size: 18px; transition: all 0.3s; padding: 5px 10px; border-radius: 5px;
  }
  .navbar ul li a:hover,
  .navbar ul li a.active { background-color: #1a1a1a; color: #ccc; }

  .hamburger { display: none; flex-direction: column; gap: 5px; cursor: pointer; }
  .hamburger span { width: 25px; height: 3px; background: #fff; border-radius: 2px; }

  .mobile-menu {
    display: none; flex-direction: column; background-color: #111;
    position: fixed; top: 70px; right: 20px; width: 220px; border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.6); overflow: hidden; z-index: 4000;
    animation: slideDown 0.3s ease forwards;
  }
  .mobile-menu a { padding: 15px; border-bottom: 1px solid #222; color: #fff; transition: background 0.3s; }
  .mobile-menu a:hover { background: #222; color: #0384fc; }
  .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 3500; }
  @keyframes slideDown { from { opacity:0; transform:translateY(-10px);} to {opacity:1; transform:translateY(0);} }

  /* Calculator */
  .calculator-container {
    max-width: 900px;
    margin: 40px auto;
    padding: 30px;
    background: #1a1a1a;
    border-radius: 16px;
    box-shadow: 0 6px 25px rgba(0,0,0,0.6);
  }
  .calculator-container h2 {
    font-size: 28px;
    margin-bottom: 25px;
    text-align: center;
    color: #fff;
    border-bottom: 1px solid #222;
    padding-bottom: 15px;
  }

  .input-group { margin-bottom: 25px; }
  .input-group label { display: block; margin-bottom: 8px; font-size: 16px; font-weight: 500; }
  .input-wrapper { display: flex; align-items: center; gap: 15px; }
  .input-wrapper input[type="number"] {
    width: 120px; padding: 8px; border: 1px solid #333; border-radius: 6px;
    background: #0f0f0f; color: #fff; font-size: 16px;
  }
  .input-wrapper input[type="range"] {
    flex: 1; height: 6px; background: #333; border-radius: 5px; -webkit-appearance: none;
  }
  .input-wrapper input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 16px; height: 16px; background: #0384fc; border-radius: 50%; cursor: pointer;
  }

  /* Results */
  .results {
    margin-top: 30px;
    padding: 25px;
    border-radius: 12px;
    background: linear-gradient(135deg, #141414, #101010);
    box-shadow: inset 0 0 10px rgba(0,0,0,0.7);
    text-align: center;
  }
  .results h3 { font-size: 24px; margin-bottom: 15px; color: #fff; }
  .results .highlight { font-size: 28px; font-weight: bold; color: #0384fc; }

  canvas { margin-top: 30px; }

  @media (max-width: 768px) {
    .navbar ul { display: none; }
    .hamburger { display: flex; }
  }
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
  <div class="brand">Talousvahti</div>
  <ul>
    <li><a href="index.html">Talousuutiset</a></li>
    <li><a href="Blogi.html">Blogi</a></li>
    <li><a href="sisapiiri.html">Sisäpiirikaupat</a></li>
    <li><a href="laskuri.html" class="active">Sijoitustuottolaskuri</a></li>
    <li><a href="#tietoa">Tietoa</a></li>
  </ul>
  <div class="hamburger" id="hamburger">
    <span></span><span></span><span></span>
  </div>
</nav>

<div class="mobile-menu" id="mobileMenu">
  <a href="index.html">Talousuutiset</a>
  <a href="Blogi.html">Blogi</a>
  <a href="sisapiiri.html">Sisäpiirikaupat</a>
  <a href="laskuri.html" class="active">Sijoitustuottolaskuri</a>
  <a href="#tietoa">Tietoa</a>
</div>
<div class="overlay" id="overlay"></div>

<!-- Calculator -->
<div class="calculator-container">
  <h2>Sijoitustuottolaskuri</h2>

  <div class="input-group">
    <label for="initial">Aloitussumma (€)</label>
    <div class="input-wrapper">
      <input type="number" id="initial" value="1000" min="0" max="1000000" step="100">
      <input type="range" id="initialRange" value="1000" min="0" max="1000000" step="100">
    </div>
  </div>

  <div class="input-group">
    <label for="return">Tuotto per vuosi (%)</label>
    <div class="input-wrapper">
      <input type="number" id="return" value="7" min="0" max="20" step="0.1">
      <input type="range" id="returnRange" value="7" min="0" max="20" step="0.1">
    </div>
  </div>

  <div class="input-group">
    <label for="years">Säästöaika (vuosina)</label>
    <div class="input-wrapper">
      <input type="number" id="years" value="20" min="1" max="50" step="1">
      <input type="range" id="yearsRange" value="20" min="1" max="50" step="1">
    </div>
  </div>

  <div class="input-group">
    <label for="monthly">Kuukausittainen säästösumma (€)</label>
    <div class="input-wrapper">
      <input type="number" id="monthly" value="200" min="0" max="10000" step="10">
      <input type="range" id="monthlyRange" value="200" min="0" max="10000" step="10">
    </div>
  </div>

  <div class="results">
    <h3>Kertynyt pääoma</h3>
    <div class="highlight" id="total">0 €</div>
    <p><span id="duration">0</span> vuodessa</p>
    <canvas id="growthChart"></canvas>
  </div>
</div>

<script>
  // Hamburger
  const hamburger = document.getElementById('hamburger');
  const mobileMenu = document.getElementById('mobileMenu');
  const overlay = document.getElementById('overlay');
  hamburger.addEventListener('click', () => {
    const isOpen = mobileMenu.style.display === 'flex';
    mobileMenu.style.display = isOpen ? 'none' : 'flex';
    overlay.style.display = isOpen ? 'none' : 'block';
  });
  overlay.addEventListener('click', () => {
    mobileMenu.style.display = 'none';
    overlay.style.display = 'none';
  });

  // Inputs
  const initial = document.getElementById('initial');
  const initialRange = document.getElementById('initialRange');
  const yearlyReturn = document.getElementById('return');
  const returnRange = document.getElementById('returnRange');
  const years = document.getElementById('years');
  const yearsRange = document.getElementById('yearsRange');
  const monthly = document.getElementById('monthly');
  const monthlyRange = document.getElementById('monthlyRange');

  const totalEl = document.getElementById('total');
  const durationEl = document.getElementById('duration');

  const sync = (input, range) => {
    input.addEventListener('input', () => { range.value = input.value; calculate(); });
    range.addEventListener('input', () => { input.value = range.value; calculate(); });
  };

  sync(initial, initialRange);
  sync(yearlyReturn, returnRange);
  sync(years, yearsRange);
  sync(monthly, monthlyRange);

  // Chart
  const ctx = document.getElementById('growthChart').getContext('2d');
  let growthChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [],
      datasets: [
        {
          label: 'Säästetty summa',
          data: [],
          borderColor: 'gray',
          backgroundColor: 'transparent',
          borderWidth: 2,
          tension: 0, // suora viiva
        },
        {
          label: 'Sijoitusten tuotto',
          data: [],
          borderColor: '#0384fc',
          backgroundColor: 'transparent',
          borderWidth: 2,
          tension: 0.4, // aaltoileva
        }
      ]
    },
    options: {
      responsive: true,
      plugins: { legend: { labels: { color: '#fff' } } },
      scales: {
        x: { ticks: { color: '#fff' } },
        y: { ticks: { color: '#fff' } }
      }
    }
  });

  function calculate() {
    let P = parseFloat(initial.value);
    let r = parseFloat(yearlyReturn.value) / 100 / 12;
    let n = parseInt(years.value) * 12;
    let contrib = parseFloat(monthly.value);

    // Lopullinen summa
    let total = P * Math.pow(1 + r, n);
    for (let i = 1; i <= n; i++) {
      total += contrib * Math.pow(1 + r, n - i);
    }
    totalEl.textContent = total.toLocaleString('fi-FI', { style: 'currency', currency: 'EUR' });
    durationEl.textContent = years.value;

    // Kuvaajan data
    let labels = [];
    let savedData = [];
    let investedData = [];
    let currentSaved = P;
    let currentTotal = P;

    for (let year = 1; year <= parseInt(years.value); year++) {
      labels.push(year);

      // vain säästetty
      currentSaved = P + (contrib * 12 * year);
      savedData.push(currentSaved);

      // sijoitusten tuotto (aaltoileva randomilla)
      currentTotal *= (1 + (r * 12) + ((Math.random() - 0.5) * 0.1)); // pientä vaihtelua
      currentTotal += contrib * 12;
      investedData.push(currentTotal);
    }

    growthChart.data.labels = labels;
    growthChart.data.datasets[0].data = savedData;
    growthChart.data.datasets[1].data = investedData;
    growthChart.update();
  }

  calculate();
</script>

</body>
</html>

